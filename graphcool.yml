types: ./types.graphql


functions:
  syncProducts:
    type: subscription
    query: ./src/algolia/syncQuery.graphql
    handler:
      code:
        src: ./src/algolia/sync.js
        environment:
          ALGOLIA_APP_ID: ${env:ALGOLIA_APP_ID}
          ALGOLIA_API_KEY: ${env:ALGOLIA_API_KEY}
          ALGOLIA_INDEX_NAME: ${env:ALGOLIA_INDEX_NAME}

  hello:
    handler:
      code: src/hello.js
    type: resolver
    schema: src/hello.graphql


permissions:
  - operation: Product.read
  - operation: Brand.read


rootTokens:
  - scripting

