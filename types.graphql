# The following types define the data model of the example service
# based on which the GraphQL API is generated


type Brand @model {
  id: ID! @isUnique
  createdAt: DateTime!
  updatedAt: DateTime!

  name: String!
  products: [Product!]! @relation(name: "BrandProducts")

  boost: Int! @defaultValue(value: 0)
  isHidden: Boolean! @defaultValue(value: "false")
  notes: String
}


type Product @model {
  id: ID! @isUnique
  upc: String @isUnique
  asin: String @isUnique
  sku: String

  name: String!
  brand: Brand! @relation(name: "BrandProducts")
  gfCert: GF_CERT!
  gfCertLevel: Int

  parent: Product @relation(name: "ProductVariations")
  variations: [Product!]! @relation(name: "ProductVariations")
  offers: [Offer!]! @relation(name: "ProductOffers")

  thriveListings: [ThriveProduct!]! @relation(name: "ThriveListings")
  nutsListings: [NutsProduct!]! @relation(name: "NutsListings")

  size: String
  description: String
  ingredients: String

  lastVerifiedAt: DateTime
  isAffiliate: Boolean! @defaultValue(value: "false")
  isHidden: Boolean! @defaultValue(value: "false")
  notes: String

  createdAt: DateTime!
  updatedAt: DateTime!
}


type Offer @model {
  id: ID! @isUnique

  product: Product! @relation(name: "ProductOffers")
  merchant: String!
  isAffiliate: Boolean!
  url: String! @isUnique
  price: Float

  createdAt: DateTime!
  updatedAt: DateTime!
}


type ThriveProduct @model {
  id: ID! @isUnique
  createdAt: DateTime!
  updatedAt: DateTime!

  listing: Product @relation(name: "ThriveListings")
  name: String!
  brandName: String!
  url: String! @isUnique
  sku: String! @isUnique
  package: String!
  image: String!
  price: Float!

  matchStatus: MATCH_STATUS! @defaultValue(value: PENDING)
  matchScore: MATCH_SCORE! @defaultValue(value: UNKNOWN)
}

type NutsProduct @model {
  id: ID! @isUnique
  createdAt: DateTime!
  updatedAt: DateTime!

  listing: Product @relation(name: "NutsListings")
  name: String!
  brandName: String! @defaultValue(value: "Nuts.com")
  url: String! @isUnique
  sku: String! @isUnique
  image: String!
  thumbnail: String!
  price: Float!
  shortDescription: String!
  description: String!
  category: String!
  subCategory: String!
  lastUpdated: DateTime!
  bestSeller: Boolean! @defaultValue(value: "false")

  matchStatus: MATCH_STATUS! @defaultValue(value: PENDING)
  matchScore: MATCH_SCORE! @defaultValue(value: UNKNOWN)
}


enum MATCH_STATUS {
  PENDING
  NEEDS_REVIEW
  MATCHED
  INVALID
  NONE
}

enum MATCH_SCORE {
  UNKNOWN
  PERFECT
  POSSIBLE
  NONE
}

enum GF_CERT {
  GFCO
  GFCP
}
